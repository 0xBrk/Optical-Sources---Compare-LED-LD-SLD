<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optical Engineering Report: V6 Complete Edition</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; scroll-behavior: smooth; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        canvas { width: 100% !important; height: 100% !important; }
        .chart-container { position: relative; height: 260px; width: 100%; }
        
        /* Interactive Elements */
        .particle-box {
            background: #0f172a;
            border-radius: 0.5rem;
            position: relative;
            overflow: hidden;
            height: 240px;
            border: 1px solid #334155;
            transition: all 0.3s ease;
        }
        
        .diagram-box {
            background: #ffffff;
            border-radius: 0.5rem;
            height: 240px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #e2e8f0;
        }

        .hidden-panel { display: none !important; }
        
        /* Custom Range Slider Styling */
        input[type=range] {
            height: 6px;
            border-radius: 5px;
            background: #e2e8f0;
            outline: none;
            -webkit-appearance: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            transition: transform 0.1s;
        }
        input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }
        
        /* Animation for Warning */
        @keyframes pulse-red {
            0%, 100% { background-color: #ef4444; }
            50% { background-color: #b91c1c; }
        }
        .animate-pulse-red { animation: pulse-red 2s infinite; }
    </style>
</head>
<body class="text-slate-800 flex flex-col min-h-screen">

    <nav class="sticky top-0 z-50 bg-white/95 backdrop-blur border-b border-slate-200 shadow-sm">
        <div class="container mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-indigo-600 rounded flex items-center justify-center text-white font-bold shadow-lg">G3</div>
                <span class="font-bold text-lg tracking-tight">Optical<span class="text-indigo-600">Sim</span> V6</span>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-medium text-slate-600">
                <a href="#task1" class="hover:text-indigo-600 transition">Physics</a>
                <a href="#task2" class="hover:text-indigo-600 transition">Characteristics</a>
                <a href="#task3" class="hover:text-indigo-600 transition">Link Budget</a>
                <a href="#task6" class="hover:text-indigo-600 transition">Reliability</a>
                <a href="#finalreport" class="hover:text-indigo-600 transition">Final Report</a>
            </div>
        </div>
    </nav>

    <header class="bg-gradient-to-b from-white to-slate-50 py-16 border-b">
        <div class="container mx-auto px-4 text-center max-w-4xl">
            <div class="inline-block px-3 py-1 mb-4 text-xs font-bold tracking-wider text-indigo-500 uppercase bg-indigo-50 rounded-full">Engineering Analysis Tool</div>
            <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 mb-6">Optical Source Selection</h1>
            <p class="text-lg text-slate-600 leading-relaxed">
                Comparative analysis of <strong>LED</strong>, <strong>Laser Diode (LD)</strong>, and <strong>SLD</strong> sources for optical communication links.
            </p>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-12 space-y-24">

        <section id="task1" class="scroll-mt-24">
            <div class="flex items-center gap-4 mb-8">
                <div class="h-8 w-1 bg-indigo-500 rounded-full"></div>
                <h2 class="text-2xl font-bold text-slate-900">1. Physics & Emission Mechanisms</h2>
            </div>
            
            <p class="text-slate-600 mb-6 max-w-3xl">
                Compare the photon behavior (Particle View) against the Quantum Mechanical Energy Band diagrams (Theory View).
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white p-1 rounded-xl shadow-sm border border-slate-200 overflow-hidden group">
                    <div class="p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                        <h3 class="font-bold text-rose-500">LED</h3>
                        <button onclick="toggleView('led')" class="text-xs bg-white border border-slate-300 px-3 py-1 rounded hover:bg-slate-100 transition font-medium text-slate-600">Toggle Theory</button>
                    </div>
                    <div class="p-5">
                        <div id="view-led-particle" class="particle-box">
                            <canvas id="canvas-led"></canvas>
                            <div class="absolute bottom-2 left-2 text-xs text-rose-400 font-mono bg-slate-900/50 px-2 rounded">Phase: Incoherent</div>
                        </div>
                        <div id="view-led-theory" class="diagram-box hidden-panel">
                             <svg width="220" height="200" viewBox="0 0 200 180">
                                <rect x="20" y="20" width="160" height="30" fill="#e2e8f0" rx="4" />
                                <text x="100" y="40" font-family="sans-serif" font-size="10" text-anchor="middle" fill="#64748b">Conduction Band (Ec)</text>
                                <rect x="20" y="130" width="160" height="30" fill="#e2e8f0" rx="4" />
                                <text x="100" y="150" font-family="sans-serif" font-size="10" text-anchor="middle" fill="#64748b">Valence Band (Ev)</text>
                                <circle cx="80" cy="35" r="6" fill="#f43f5e" />
                                <line x1="80" y1="35" x2="120" y2="130" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4" />
                                <path d="M 100 80 Q 120 60 140 80 T 180 80" stroke="#f43f5e" stroke-width="3" fill="none" marker-end="url(#arrowhead)" />
                                <text x="150" y="70" font-size="12" fill="#f43f5e">hŒΩ (Random)</text>
                            </svg>
                        </div>
                        <p class="text-sm text-slate-600 mt-4 h-16">
                            <strong>Spontaneous Emission:</strong> Electrons fall randomly across the bandgap. No phase relationship. <br><span class="text-xs text-rose-500">Result: Broad Spectrum (~50nm).</span>
                        </p>
                    </div>
                </div>

                <div class="bg-white p-1 rounded-xl shadow-md border-t-4 border-emerald-500 overflow-hidden ring-1 ring-slate-100">
                    <div class="p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                        <h3 class="font-bold text-emerald-600">Laser Diode (LD)</h3>
                        <button onclick="toggleView('ld')" class="text-xs bg-white border border-slate-300 px-3 py-1 rounded hover:bg-slate-100 transition font-medium text-slate-600">Toggle Theory</button>
                    </div>
                    <div class="p-5">
                        <div id="view-ld-particle" class="particle-box">
                            <canvas id="canvas-ld"></canvas>
                            <div class="absolute bottom-2 left-2 text-xs text-emerald-400 font-mono bg-slate-900/50 px-2 rounded">Phase: Coherent</div>
                        </div>
                        <div id="view-ld-theory" class="diagram-box hidden-panel">
                            <svg width="220" height="200" viewBox="0 0 200 180">
                                <rect x="20" y="20" width="160" height="30" fill="#e2e8f0" rx="4" />
                                <rect x="20" y="130" width="160" height="30" fill="#e2e8f0" rx="4" />
                                <path d="M 10 80 Q 30 60 50 80" stroke="#10b981" stroke-width="2" fill="none" />
                                <circle cx="80" cy="35" r="6" fill="#10b981" />
                                <line x1="80" y1="35" x2="80" y2="130" stroke="#94a3b8" stroke-width="2" />
                                <path d="M 80 80 Q 100 60 120 80 T 160 80" stroke="#10b981" stroke-width="3" fill="none" />
                                <path d="M 80 90 Q 100 70 120 90 T 160 90" stroke="#10b981" stroke-width="3" fill="none" />
                                <text x="110" y="60" font-size="12" fill="#10b981">2hŒΩ (Clones)</text>
                            </svg>
                        </div>
                        <p class="text-sm text-slate-600 mt-4 h-16">
                            <strong>Stimulated Emission:</strong> Incident photon triggers recombination. Photons are identical clones. <br><span class="text-xs text-emerald-600">Result: Narrow Spectrum (<1nm).</span>
                        </p>
                    </div>
                </div>

                <div class="bg-white p-1 rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                        <h3 class="font-bold text-indigo-500">SLD</h3>
                        <button onclick="toggleView('sld')" class="text-xs bg-white border border-slate-300 px-3 py-1 rounded hover:bg-slate-100 transition font-medium text-slate-600">Toggle Theory</button>
                    </div>
                    <div class="p-5">
                        <div id="view-sld-particle" class="particle-box">
                            <canvas id="canvas-sld"></canvas>
                            <div class="absolute bottom-2 left-2 text-xs text-indigo-400 font-mono bg-slate-900/50 px-2 rounded">Phase: Low Coherence</div>
                        </div>
                        <div id="view-sld-theory" class="diagram-box hidden-panel">
                            <svg width="220" height="200" viewBox="0 0 200 180">
                                <rect x="20" y="60" width="160" height="60" fill="#f1f5f9" stroke="#cbd5e1" />
                                <text x="100" y="50" font-size="10" text-anchor="middle" fill="#64748b">Active Region (No Mirrors)</text>
                                <path d="M 30 90 L 170 90" stroke="#6366f1" stroke-width="4" stroke-dasharray="5,2" />
                                <text x="100" y="140" font-size="10" text-anchor="middle" fill="#6366f1">Amplified Spontaneous</text>
                            </svg>
                        </div>
                        <p class="text-sm text-slate-600 mt-4 h-16">
                            <strong>ASE:</strong> High power like a laser, but lacks optical cavity mirrors. <br><span class="text-xs text-indigo-500">Result: Directional but Broad Spectrum.</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="task2" class="scroll-mt-24">
            <div class="flex items-center gap-4 mb-8">
                <div class="h-8 w-1 bg-indigo-500 rounded-full"></div>
                <h2 class="text-2xl font-bold text-slate-900">2. Device Characteristics</h2>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h3 class="text-sm font-bold text-slate-500 uppercase mb-4 tracking-wider">Performance Matrix</h3>
                    <div class="chart-container">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h3 class="text-sm font-bold text-slate-500 uppercase mb-4 tracking-wider">Spectral Characteristics</h3>
                    <div class="chart-container">
                        <canvas id="spectralChart"></canvas>
                    </div>
                    <div class="mt-4 p-3 bg-slate-50 rounded text-xs text-slate-600 border border-slate-100">
                        <strong>Why this matters:</strong> The broad linewidth of the LED (Red dashed) causes <em>Chromatic Dispersion</em>, where different colors travel at different speeds, blurring the signal over long distances. The Laser (Green) avoids this.
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <table class="w-full text-sm text-left">
                    <thead class="bg-slate-50 text-xs uppercase font-semibold text-slate-500 border-b border-slate-200">
                        <tr>
                            <th class="px-6 py-4">Parameter</th>
                            <th class="px-6 py-4 text-rose-600">LED</th>
                            <th class="px-6 py-4 text-emerald-600">Laser Diode (LD)</th>
                            <th class="px-6 py-4 text-indigo-600">SLD</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 font-medium text-slate-700">Output Power (into fiber)</td>
                            <td class="px-6 py-4">Low (-15 to -10 dBm)</td>
                            <td class="px-6 py-4 font-bold">High (0 to +10 dBm)</td>
                            <td class="px-6 py-4">Medium (-5 to +5 dBm)</td>
                        </tr>
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 font-medium text-slate-700">Spectral Width (FWHM)</td>
                            <td class="px-6 py-4">Broad (30-100 nm)</td>
                            <td class="px-6 py-4 font-bold">Narrow (< 1 nm)</td>
                            <td class="px-6 py-4">Broad (20-50 nm)</td>
                        </tr>
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 font-medium text-slate-700">Modulation Bandwidth</td>
                            <td class="px-6 py-4">Low (< 200 MHz)</td>
                            <td class="px-6 py-4 font-bold">Very High (> 10 GHz)</td>
                            <td class="px-6 py-4">Medium (~500 MHz)</td>
                        </tr>
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 font-medium text-slate-700">Fiber Coupling</td>
                            <td class="px-6 py-4">Poor (Lambertian)</td>
                            <td class="px-6 py-4 font-bold">Excellent (Directional)</td>
                            <td class="px-6 py-4">Good (Directional)</td>
                        </tr>
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 font-medium text-slate-700">Cost & Complexity</td>
                            <td class="px-6 py-4 text-emerald-600 font-bold">Low</td>
                            <td class="px-6 py-4 text-rose-500">High (Temp control needed)</td>
                            <td class="px-6 py-4 text-amber-600">Medium/High</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="task3" class="scroll-mt-24">
            <div class="flex items-center gap-4 mb-8">
                <div class="h-8 w-1 bg-indigo-500 rounded-full"></div>
                <h2 class="text-2xl font-bold text-slate-900">3. Link Budget & Feasibility Analysis</h2>
            </div>

            <div class="bg-slate-100 p-2 rounded-xl inline-flex mb-8 gap-2 flex-wrap">
                <button onclick="setScenario('telecom')" id="btn-telecom" class="px-6 py-2 rounded-lg text-sm font-bold transition">üì° Long Haul (Telecom)</button>
                <button onclick="setScenario('datacenter')" id="btn-datacenter" class="px-6 py-2 rounded-lg text-sm font-bold transition">üè¢ Datacenter (LAN)</button>
                <button onclick="setScenario('sensor')" id="btn-sensor" class="px-6 py-2 rounded-lg text-sm font-bold transition">ü©∫ Bio-Sensor (OCT)</button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                
                <div class="lg:col-span-5 space-y-6">
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
                            <svg class="w-4 h-4 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>
                            Link Parameters
                        </h3>
                        
                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-slate-600">Distance ($L$)</span>
                                    <span id="lbl-dist" class="font-mono font-bold text-indigo-600">50 km</span>
                                </div>
                                <input type="range" id="sl-dist" min="0.1" max="100" step="0.1" class="w-full">
                                <div class="w-full h-1 bg-slate-100 mt-1 rounded overflow-hidden">
                                    <div id="vis-dist-bar" class="h-full bg-indigo-400 transition-all duration-300" style="width: 50%"></div>
                                </div>
                                <div class="flex justify-between text-[10px] text-slate-400 mt-1">
                                    <span>0km</span>
                                    <span>Scale: 100km</span>
                                </div>
                            </div>

                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-slate-600">Attenuation ($\alpha$)</span>
                                    <span id="lbl-att" class="font-mono font-bold text-indigo-600">0.2 dB/km</span>
                                </div>
                                <input type="range" id="sl-att" min="0.1" max="5" step="0.1" class="w-full">
                            </div>

                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-slate-600">Connector Loss ($L_c$)</span>
                                    <span id="lbl-conn" class="font-mono font-bold text-indigo-600">2.0 dB</span>
                                </div>
                                <input type="range" id="sl-conn" min="0" max="10" step="0.5" class="w-full">
                            </div>

                            <div class="p-3 bg-indigo-50 border border-indigo-100 rounded text-xs text-indigo-800">
                                <strong>Safety Margin:</strong> 3.0 dB (Fixed for aging/repair)
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="bg-slate-900 text-slate-200 p-5 rounded-xl font-mono text-sm border border-slate-700 shadow-lg relative overflow-hidden">
                            <div class="absolute top-0 right-0 p-2 opacity-10 text-6xl font-bold">‚àë</div>
                            <div class="text-xs text-slate-500 uppercase tracking-widest mb-2 font-bold">Live Calculation</div>
                            
                            <div class="mb-4 text-emerald-400 font-bold">
                                $$ P_{rx} = P_{tx} - (\text{Attenuation} \times \text{Distance}) - \text{Connectors} - \text{Margin} $$
                            </div>
    
                            <div id="live-formula-display" class="leading-relaxed mb-4 pb-4 border-b border-slate-700">
                                </div>
    
                            <div class="flex justify-between items-center text-emerald-400">
                                <span>Calculated $P_{rx}$:</span>
                                <span id="val-prx" class="text-xl font-bold">-15.00 dBm</span>
                            </div>
                        </div>
                        
                        <div class="mt-2 pl-2 text-[10px] text-slate-500 space-y-1">
                            <p><strong>$P_{rx}$:</strong> Received Power (must be > Sensitivity)</p>
                            <p><strong>$P_{tx}$:</strong> Transmitter Launch Power (e.g. Laser = 0 dBm)</p>
                            <p><strong>Margin:</strong> 3dB safety buffer for aging/repair.</p>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-7 space-y-6">
                    <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                        <h4 class="text-sm font-bold text-slate-500 mb-2 uppercase tracking-wide">Power Budget vs. Distance</h4>
                        <div class="chart-container" style="height: 280px;">
                            <canvas id="budgetChart"></canvas>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm">
                        <div class="bg-slate-50 px-4 py-2 border-b border-slate-200 text-xs font-bold text-slate-500 uppercase flex justify-between">
                            <span>Feasibility Analysis</span>
                            <span class="text-slate-400 font-normal">Sensitivity: -30 dBm</span>
                        </div>
                        <table class="w-full text-sm text-left">
                            <thead class="bg-white text-xs text-slate-400 border-b border-slate-100">
                                <tr>
                                    <th class="px-4 py-2">Source</th>
                                    <th class="px-4 py-2">Launch Pwr</th>
                                    <th class="px-4 py-2">Rx Power</th>
                                    <th class="px-4 py-2">Margin</th>
                                    <th class="px-4 py-2 text-center">Verdict</th>
                                </tr>
                            </thead>
                            <tbody id="feasibility-body" class="divide-y divide-slate-100">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section id="task6" class="scroll-mt-24 mb-20">
            <div class="flex items-center gap-4 mb-8">
                <div class="h-8 w-1 bg-indigo-500 rounded-full"></div>
                <h2 class="text-2xl font-bold text-slate-900">4. Reliability & Thermal Engineering</h2>
            </div>
            
            <div class="bg-white p-8 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                <div id="thermal-warning" class="hidden-panel absolute top-0 left-0 w-full h-16 bg-rose-600 text-white flex items-center justify-center font-bold z-10 animate-pulse-red shadow-lg">
                    <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                    CRITICAL WARNING: Laser Junction Temperature > 50¬∞C. TEC Cooling Required!
                </div>

                <div class="flex flex-col md:flex-row gap-10">
                    <div class="md:w-1/3 space-y-6">
                        <div>
                            <h3 class="font-bold text-slate-800 mb-2">Operating Temperature ($T_{op}$)</h3>
                            <p class="text-sm text-slate-500 mb-4">
                                Laser Diodes are highly sensitive to heat ($T_0 \approx 60K$). As temperature rises, efficiency plummets, requiring current adjustment or cooling.
                            </p>
                            <input type="range" id="sl-temp" min="20" max="100" value="25" class="w-full accent-rose-500">
                            <div class="flex justify-between mt-2 font-mono text-xs text-slate-400">
                                <span>20¬∞C</span>
                                <span id="lbl-temp" class="text-lg font-bold text-rose-500">25¬∞C</span>
                                <span>100¬∞C</span>
                            </div>
                        </div>

                        <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 text-sm">
                            <strong class="text-slate-700">Physics Formula:</strong>
                            <div class="py-2 text-slate-600 font-mono text-xs">
                                $$ P(T) = P_{20} \cdot e^{-\frac{T-20}{T_0}} $$
                            </div>
                            <ul class="list-disc ml-4 mt-1 text-slate-500 text-xs space-y-1">
                                <li><strong>LED:</strong> High $T_0$ (Stable)</li>
                                <li><strong>Laser:</strong> Low $T_0$ (Unstable)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="md:w-2/3">
                        <div class="chart-container">
                            <canvas id="reliabilityChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="finalreport" class="scroll-mt-24 mb-20">
            <div class="flex items-center gap-4 mb-8">
                <div class="h-8 w-1 bg-slate-800 rounded-full"></div>
                <h2 class="text-2xl font-bold text-slate-900 uppercase tracking-widest">5. Final Engineering Report</h2>
            </div>

            <div class="bg-white p-10 rounded-xl border border-slate-200 shadow-lg max-w-5xl mx-auto">
                
                <h3 class="text-xl font-bold text-teal-700 mb-4 border-b border-teal-100 pb-2">1. Device Selection & Justification</h3>
                <p class="text-slate-700 mb-4 leading-relaxed">
                    Based on the comparative analysis and link budget simulation, the <strong>Laser Diode (LD)</strong> is selected as the optimal optical source for the proposed high-speed, long-distance link.
                </p>
                <ul class="list-disc pl-5 mb-8 space-y-3 text-slate-700 text-sm">
                    <li>
                        <strong>Power Budget:</strong> As demonstrated in the simulation, the LD (0 dBm launch power) provides sufficient margin to overcome attenuation over distances >50km, whereas LED (-15 dBm) fails rapidly due to low coupling efficiency and power.
                    </li>
                    <li>
                        <strong>Dispersion Limits:</strong> The LD's narrow spectral width (<1 nm) minimizes chromatic dispersion, which is critical for maintaining high data rates (>1 Gbps) over Single Mode Fiber. LED and SLD broad spectra would cause severe pulse broadening (Inter-Symbol Interference).
                    </li>
                    <li>
                        <strong>SLD Role:</strong> While SLD offers higher power than LED, its broad spectrum makes it unsuitable for long-haul telecom. It is better reserved for short-range sensing (OCT) or navigation (FOG) where low coherence is an asset.
                    </li>
                </ul>

                <h3 class="text-xl font-bold text-teal-700 mb-4 border-b border-teal-100 pb-2">2. Reliability & Engineering Considerations</h3>
                <p class="text-slate-700 mb-6">While LD is the performance winner, the following engineering trade-offs must be managed:</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-slate-50 p-6 rounded-lg border border-slate-100">
                        <h4 class="font-bold text-slate-900 mb-2">Thermal Management</h4>
                        <p class="text-sm text-slate-600 leading-relaxed">
                            LD threshold current is highly temperature-dependent. A Thermo-Electric Cooler (TEC) and monitoring photodiode are required, increasing cost and power consumption compared to uncooled LEDs.
                        </p>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-lg border border-slate-100">
                        <h4 class="font-bold text-slate-900 mb-2">Safety & Eye Care</h4>
                        <p class="text-sm text-slate-600 leading-relaxed">
                            The high collimation and power density of LDs pose retinal hazard (Class 1/3B). Automatic Power Reduction (APR) mechanisms must be implemented if the fiber is cut.
                        </p>
                    </div>
                </div>

            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-400 py-10 text-center text-sm border-t border-slate-800">
        <p>&copy; 2025 Optical Engineering Group. Complete Interactive Report V6.</p>
    </footer>

    <script>
        // --- CONFIG ---
        const sources = {
            LED: { color: '#f43f5e', pTx: -15, label: 'LED', t0: 120 },
            LD:  { color: '#10b981', pTx: 0,   label: 'Laser (LD)', t0: 60 },
            SLD: { color: '#6366f1', pTx: -5,  label: 'SLD', t0: 80 }
        };
        const sensitivity = -30; // dBm receiver sensitivity
        const safetyMargin = 3.0; // dB

        // --- 1. VIEW TOGGLE LOGIC ---
        function toggleView(type) {
            const p = document.getElementById(`view-${type}-particle`);
            const t = document.getElementById(`view-${type}-theory`);
            if (p.classList.contains('hidden-panel')) {
                p.classList.remove('hidden-panel');
                t.classList.add('hidden-panel');
            } else {
                p.classList.add('hidden-panel');
                t.classList.remove('hidden-panel');
            }
        }

        // --- 2. PARTICLE SYSTEM ---
        class Photon {
            constructor(w, h, type) { this.w = w; this.h = h; this.type = type; this.reset(); }
            reset() {
                this.x = 0; this.y = this.h / 2; this.life = 1;
                let angle = 0; let speed = 2;
                if(this.type === 'LED') { angle = (Math.random()-0.5)*1.5; speed = 1+Math.random(); } // Random angle
                if(this.type === 'LD') { angle = (Math.random()-0.5)*0.05; speed = 3; this.y += (Math.random()-0.5)*5; } // Coherent
                if(this.type === 'SLD') { angle = (Math.random()-0.5)*0.3; speed = 2.5; } // Directional but loose
                this.vx = Math.cos(angle)*speed; this.vy = Math.sin(angle)*speed;
            }
            update() { this.x += this.vx; this.y += this.vy; if(this.x > this.w || Math.abs(this.y-this.h/2)>60) this.reset(); }
            draw(ctx) { ctx.fillStyle = this.type==='LED'?'#f43f5e':(this.type==='LD'?'#10b981':'#6366f1'); ctx.beginPath(); ctx.arc(this.x, this.y, 2, 0, Math.PI*2); ctx.fill(); }
        }

        function initParticles(id, type) {
            const c = document.getElementById(id); const ctx = c.getContext('2d');
            const resize = () => { c.width = c.parentElement.offsetWidth; c.height = c.parentElement.offsetHeight; };
            resize(); window.addEventListener('resize', resize);
            const pool = Array.from({length:40}, ()=>new Photon(c.width, c.height, type));
            function loop() { ctx.fillStyle='rgba(15,23,42,0.2)'; ctx.fillRect(0,0,c.width,c.height); pool.forEach(p=>{p.update();p.draw(ctx)}); requestAnimationFrame(loop); }
            loop();
        }

        // --- 3. CHART CONFIGURATIONS ---
        
        // A. Radar Chart
        new Chart(document.getElementById('radarChart'), {
            type: 'radar',
            data: {
                labels: ['Bandwidth', 'Power', 'Coupling', 'Cost Efficiency', 'Reliability'],
                datasets: [
                    { label: 'LED', data: [1, 2, 1, 5, 5], borderColor: sources.LED.color, backgroundColor: 'rgba(244, 63, 94, 0.2)' },
                    { label: 'LD', data: [5, 5, 5, 2, 3], borderColor: sources.LD.color, backgroundColor: 'rgba(16, 185, 129, 0.2)' },
                    { label: 'SLD', data: [3, 4, 4, 3, 4], borderColor: sources.SLD.color, backgroundColor: 'rgba(99, 102, 241, 0.2)' }
                ]
            }, options: { maintainAspectRatio: false, scales: { r: { min: 0, max: 5 } } }
        });

        // B. Spectral Chart
        const lambdaData = (center, width) => {
            let data = [];
            for(let x=1200; x<1700; x+=5) {
                let y = Math.exp(-Math.pow(x-center,2)/(2*Math.pow(width,2)));
                data.push({x: x, y: y});
            }
            return data;
        };
        
        new Chart(document.getElementById('spectralChart'), {
            type: 'line',
            data: {
                datasets: [
                    { label: 'Laser (Narrow)', data: lambdaData(1550, 2), borderColor: sources.LD.color, pointRadius: 0, borderWidth: 3 },
                    { label: 'LED (Broad)', data: lambdaData(1310, 40), borderColor: sources.LED.color, pointRadius: 0, borderDash: [5,5] }
                ]
            },
            options: { 
                maintainAspectRatio: false, 
                plugins: { legend: {position: 'top'} },
                scales: { x: {type: 'linear', title: {display:true, text:'Wavelength (nm)'}}, y: {display:false} }
            }
        });

        // C. Link Budget Chart
        const budgetChart = new Chart(document.getElementById('budgetChart'), {
            type: 'line',
            data: {
                labels: [0, 50],
                datasets: [
                    { label: 'LED', data: [], borderColor: sources.LED.color, borderDash:[5,5] },
                    { label: 'LD', data: [], borderColor: sources.LD.color },
                    { label: 'SLD', data: [], borderColor: sources.SLD.color },
                    { label: 'Sensitivity Limit', data: [], borderColor: '#94a3b8', borderWidth: 2, borderDash: [2,2] }
                ]
            },
            options: { maintainAspectRatio: false, scales: { x: {title: {display:true, text: 'Distance (km)'}}, y: {min: -45, max: 10, title: {display:true, text: 'Power (dBm)'}}} }
        });

        // D. Reliability Chart
        const relChart = new Chart(document.getElementById('reliabilityChart'), {
            type: 'line',
            data: {
                labels: [20, 30, 40, 50, 60, 70, 80, 90, 100],
                datasets: [
                    { label: 'LED (Stable)', data: [], borderColor: sources.LED.color },
                    { label: 'LD (Droop)', data: [], borderColor: sources.LD.color }
                ]
            },
            options: { maintainAspectRatio: false, scales: { y: {min: 0, max: 100, title:{display:true,text:'Output Power %'}}, x: {title:{display:true,text:'Temp (¬∞C)'}} } }
        });

        // --- 4. SIMULATION LOGIC ---
        function setScenario(type) {
            // Button visual states
            const btns = document.querySelectorAll('#task3 button');
            btns.forEach(b => { b.classList.remove('bg-indigo-600', 'text-white'); b.classList.add('bg-slate-200'); });
            document.getElementById(`btn-${type}`).classList.add('bg-indigo-600', 'text-white');
            document.getElementById(`btn-${type}`).classList.remove('bg-slate-200');

            // Set preset values
            if(type === 'telecom') { updateSliders(50, 0.2, 2.0); }
            if(type === 'datacenter') { updateSliders(0.2, 3.0, 1.5); }
            if(type === 'sensor') { updateSliders(2.0, 1.0, 3.0); }
        }

        function updateSliders(d, a, c) {
            document.getElementById('sl-dist').value = d;
            document.getElementById('sl-att').value = a;
            document.getElementById('sl-conn').value = c;
            updateSim();
        }

        function updateSim() {
            // Get inputs
            const L = parseFloat(document.getElementById('sl-dist').value);
            const alpha = parseFloat(document.getElementById('sl-att').value);
            const Lc = parseFloat(document.getElementById('sl-conn').value);

            // Update Labels
            document.getElementById('lbl-dist').innerText = L + " km";
            document.getElementById('lbl-att').innerText = alpha + " dB/km";
            document.getElementById('lbl-conn').innerText = Lc + " dB";
            
            // Update Visual Scale Bar
            const widthPct = Math.min(100, (L/100)*100);
            document.getElementById('vis-dist-bar').style.width = widthPct + "%";

            // Calculation Logic
            const totalLoss = (alpha * L) + Lc + safetyMargin;
            const examplePtx = sources.LD.pTx; // Use Laser (0dBm) for the example box
            const examplePrx = examplePtx - totalLoss;

            const prxEl = document.getElementById('val-prx');
            prxEl.innerText = examplePrx.toFixed(2) + " dBm";
            prxEl.style.color = examplePrx > sensitivity ? '#34d399' : '#f87171';

            // Update Dynamic Numeric Formula (Step 2 in calc box)
            const mathEl = document.getElementById('live-formula-display');
            mathEl.innerHTML = `$$ P_{rx} = P_{tx} - (${alpha} \\times ${L}) - ${Lc} - ${safetyMargin} $$`;
            if(window.MathJax) MathJax.typesetPromise();

            // Update Budget Chart
            const distPoints = []; 
            const maxPlot = Math.max(L * 1.2, 10); 
            for(let i=0; i<=10; i++) distPoints.push((maxPlot/10)*i);
            
            budgetChart.data.labels = distPoints.map(d => d.toFixed(1));
            
            ['LED', 'LD', 'SLD'].forEach((src, idx) => {
                const data = distPoints.map(d => sources[src].pTx - ((alpha*d) + Lc + safetyMargin));
                budgetChart.data.datasets[idx].data = data;
            });
            budgetChart.data.datasets[3].data = Array(11).fill(sensitivity);
            budgetChart.update();

            // Update Feasibility Table
            const tbody = document.getElementById('feasibility-body');
            tbody.innerHTML = '';
            
            Object.values(sources).forEach(s => {
                const Prx = s.pTx - totalLoss;
                const margin = Prx - sensitivity;
                const pass = margin > 0;
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="px-4 py-3 font-medium flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full" style="background:${s.color}"></span> ${s.label}
                    </td>
                    <td class="px-4 py-3 text-slate-500">${s.pTx} dBm</td>
                    <td class="px-4 py-3 font-mono ${pass ? 'text-emerald-600' : 'text-rose-600'} font-bold">${Prx.toFixed(1)} dBm</td>
                    <td class="px-4 py-3 font-mono">${(margin>0?'+':'')+margin.toFixed(1)} dB</td>
                    <td class="px-4 py-3 text-center">
                        <span class="text-xs font-bold px-2 py-1 rounded ${pass ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700'}">
                            ${pass ? 'PASS' : 'FAIL'}
                        </span>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- 5. RELIABILITY LOGIC ---
        function updateReliability() {
            const T = parseInt(document.getElementById('sl-temp').value);
            document.getElementById('lbl-temp').innerText = T + "¬∞C";

            // Update Chart
            const temps = relChart.data.labels;
            const ledData = temps.map(t => 100 * Math.exp(-(t-20)/sources.LED.t0));
            const ldData = temps.map(t => 100 * Math.exp(-(t-20)/sources.LD.t0));
            
            relChart.data.datasets[0].data = ledData;
            relChart.data.datasets[1].data = ldData;
            relChart.update();

            // Critical Warning
            const warning = document.getElementById('thermal-warning');
            if (T > 50) {
                warning.classList.remove('hidden-panel');
            } else {
                warning.classList.add('hidden-panel');
            }
        }

        // --- INIT ---
        window.onload = () => {
            initParticles('canvas-led', 'LED');
            initParticles('canvas-ld', 'LD');
            initParticles('canvas-sld', 'SLD');
            
            // Listeners
            document.getElementById('sl-dist').addEventListener('input', updateSim);
            document.getElementById('sl-att').addEventListener('input', updateSim);
            document.getElementById('sl-conn').addEventListener('input', updateSim);
            document.getElementById('sl-temp').addEventListener('input', updateReliability);

            // Startup
            setScenario('telecom');
            updateReliability();
        };

    </script>
</body>
</html>